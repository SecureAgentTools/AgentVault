# Topic Research Agent Dockerfile
FROM python:3.10-slim

WORKDIR /app

# Install system dependencies
RUN apt-get update && apt-get install -y \
    build-essential \
    gcc \
    && rm -rf /var/lib/apt/lists/*

# Copy library and SDK
COPY agentvault_library/ /app/agentvault_library/
COPY agentvault_server_sdk/ /app/agentvault_server_sdk/

# Copy agent code
COPY poc_agents/research_pipeline/topic_research_agent.py /app/
COPY poc_agents/research_pipeline/base_agent.py /app/
COPY poc_agents/research_pipeline/agent_cards/topic_research/agent-card.json /app/agent-card.json

# Install dependencies
RUN pip install --no-cache-dir /app/agentvault_library /app/agentvault_server_sdk
RUN pip install --no-cache-dir fastapi uvicorn httpx pydantic

ENV PORT=8010
ENV AGENT_CARD_PATH=/app/agent-card.json

EXPOSE 8010

CMD ["uvicorn", "topic_research_agent:app", "--host", "0.0.0.0", "--port", "8010", "--log-level", "debug"]
