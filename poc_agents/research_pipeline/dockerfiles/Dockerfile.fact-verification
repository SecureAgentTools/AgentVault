# Fact Verification Agent Dockerfile
# --- MODIFIED: Corrected FROM line ---
FROM python:3.11-slim-bookworm
# --- END MODIFIED ---

WORKDIR /app

# Install system dependencies
RUN apt-get update && apt-get install -y \
    build-essential \
    gcc \
    && rm -rf /var/lib/apt/lists/*

# Copy library and SDK
COPY agentvault_library/ /app/agentvault_library/
COPY agentvault_server_sdk/ /app/agentvault_server_sdk/

# Copy agent code
COPY poc_agents/research_pipeline/fact_verification_agent.py /app/
COPY poc_agents/research_pipeline/base_agent.py /app/
COPY poc_agents/research_pipeline/agent_cards/fact_verification/agent-card.json /app/agent-card.json

# Install dependencies
RUN pip install --no-cache-dir /app/agentvault_library /app/agentvault_server_sdk
# --- ADDED httpx ---
RUN pip install --no-cache-dir fastapi uvicorn httpx pydantic asyncpg # Added asyncpg for potential future db use
# --- END ADDED ---

ENV PORT=8013
ENV AGENT_CARD_PATH=/app/agent-card.json
# Add LLM ENV VARS here if needed, or pass via env_file in docker-compose

EXPOSE 8013

CMD ["uvicorn", "fact_verification_agent:app", "--host", "0.0.0.0", "--port", "8013", "--log-level", "debug"]
